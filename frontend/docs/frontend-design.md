# AI Higress 前端页面设计方案

## 项目概述

AI Higress 是一个智能路由网关系统，支持多种 AI 服务提供商的统一接入和智能路由决策。前端系统基于 Next.js + React + TypeScript 构建，采用现代 UI 设计和响应式布局。

## 技术栈

- **框架**: Next.js 16.0
- **UI 库**: Tailwind CSS + 自定义组件
- **图标**: Lucide React
- **状态管理**: React Hooks + Context
- **HTTP 客户端**: Axios
- **类型检查**: TypeScript

## 整体架构

```
frontend/
├── app/                          # Next.js 应用目录
│   ├── (auth)/                   # 认证相关页面组
│   │   ├── login/               # 登录页面
│   │   └── register/            # 注册页面
│   ├── dashboard/                # 仪表盘模块
│   │   ├── overview/            # 概览页面
│   │   ├── providers/           # 提供商管理
│   │   ├── logical-models/      # 逻辑模型管理
│   │   ├── api-keys/            # API 密钥管理
│   │   ├── routing/             # 路由管理
│   │   └── metrics/             # 指标监控
│   ├── system/                   # 系统管理（管理员专用）
│   │   ├── admin/               # 系统管理
│   │   └── users/               # 用户管理
│   ├── profile/                  # 用户个人资料
│   ├── layout.tsx               # 根布局
│   ├── page.tsx                 # 首页
│   └── globals.css              # 全局样式
├── components/                    # 可复用组件
│   ├── ui/                       # 基础 UI 组件
│   ├── forms/                    # 表单组件
│   ├── charts/                   # 图表组件
│   └── layout/                   # 布局组件
├── hooks/                         # 自定义 Hooks
├── lib/                           # 工具函数
├── types/                         # 类型定义
└── http/                         # API 客户端
```

## 页面功能设计

### 1. 首页 (/)

- **功能**: 系统介绍和导航
- **访问权限**: 公开访问
- **使用API**: 无
- **内容**: 
  - 系统概述和特性介绍
  - 登录/注册入口
  - 产品截图或演示链接

### 2. 认证页面

#### 2.1 登录页面 (/login)

- **功能**: 用户登录
- **访问权限**: 公开访问
- **使用API**: 
  - POST `/auth/login` - 用户登录
  - POST `/auth/refresh` - 刷新令牌
- **组件**:
  - 用户名/邮箱输入框
  - 密码输入框
  - 记住我选项
  - 登录按钮
  - 注册链接

#### 2.2 注册页面 (/register)

- **功能**: 用户注册
- **访问权限**: 公开访问
- **使用API**: 
  - POST `/auth/register` - 用户注册
- **组件**:
  - 用户名输入框
  - 邮箱输入框
  - 密码输入框（含强度指示）
  - 确认密码输入框
  - 显示名称输入框（可选）
  - 注册按钮
  - 登录链接

### 3. 仪表盘模块

#### 3.1 概览页面 (/dashboard/overview)

- **功能**: 系统概览和关键指标
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/providers` - 获取提供商列表
  - GET `/logical-models` - 获取逻辑模型列表
  - GET `/providers/{id}/metrics` - 获取提供商指标
- **组件**:
  - 系统状态卡片（API网关、数据库、缓存）
  - 活跃提供商列表
  - 关键指标图表（成功率、延迟、请求量）
  - 最近活动日志
  - 快速操作按钮

#### 3.2 提供商管理页面 (/dashboard/providers)

- **功能**: 管理AI服务提供商
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/providers` - 获取提供商列表
  - GET `/providers/{id}` - 获取特定提供商详情
  - GET `/providers/{id}/models` - 获取提供商支持的模型
  - GET `/providers/{id}/health` - 检查提供商健康状态
  - GET `/providers/{id}/metrics` - 获取提供商指标
- **组件**:
  - 提供商列表（卡片视图和表格视图）
  - 提供商详情模态框
  - 添加提供商按钮
  - 健康状态指示器
  - 指标图表

#### 3.3 逻辑模型管理页面 (/dashboard/logical-models)

- **功能**: 管理逻辑模型和其映射关系
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/logical-models` - 获取逻辑模型列表
  - GET `/logical-models/{id}` - 获取特定逻辑模型详情
  - GET `/logical-models/{id}/upstreams` - 获取逻辑模型的上游提供商
- **组件**:
  - 逻辑模型列表
  - 逻辑模型详情视图
  - 模型映射关系图
  - 添加/编辑逻辑模型表单

#### 3.4 API密钥管理页面 (/dashboard/api-keys)

- **功能**: 管理API密钥
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/api-keys` - 获取用户的API密钥列表
  - POST `/api-keys` - 创建新API密钥
  - PUT `/api-keys/{id}` - 更新API密钥
  - DELETE `/api-keys/{id}` - 删除API密钥
  - GET `/api-keys/{id}/allowed-providers` - 获取密钥允许的提供商
  - PUT `/api-keys/{id}/allowed-providers` - 设置密钥允许的提供商
- **组件**:
  - API密钥列表
  - 创建密钥表单
  - 编辑密钥模态框
  - 密钥权限设置
  - 密钥复制功能

#### 3.5 路由管理页面 (/dashboard/routing)

- **功能**: 路由决策监控和配置
- **访问权限**: 已登录用户
- **使用API**: 
  - POST `/routing/decide` - 获取路由决策
  - GET `/routing/sessions/{id}` - 获取会话信息
  - DELETE `/routing/sessions/{id}` - 删除会话
- **组件**:
  - 路由决策模拟器
  - 会话粘性管理
  - 路由策略配置
  - 路由历史记录

#### 3.6 指标监控页面 (/dashboard/metrics)

- **功能**: 系统指标监控
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/providers/{id}/metrics` - 获取提供商指标
- **组件**:
  - 实时指标图表
  - 历史数据分析
  - 自定义时间范围选择
  - 指标导出功能

### 4. 系统管理模块（管理员专用）

#### 4.1 系统管理页面 (/system/admin)

- **功能**: 系统级管理功能
- **访问权限**: 管理员
- **使用API**: 
  - GET `/system/status` - 获取系统状态
  - POST `/system/secret-key/generate` - 生成系统密钥
  - POST `/system/secret-key/rotate` - 轮换系统密钥
  - POST `/system/admin/init` - 初始化管理员
  - POST `/system/key/validate` - 验证密钥强度
- **组件**:
  - 系统状态监控
  - 密钥管理工具
  - 系统配置面板
  - 系统日志查看器

#### 4.2 用户管理页面 (/system/users)

- **功能**: 管理系统用户
- **访问权限**: 管理员
- **使用API**: 
  - GET `/users` - 获取用户列表
  - POST `/users` - 创建用户
  - PUT `/users/{id}` - 更新用户
  - PUT `/users/{id}/status` - 更新用户状态
- **组件**:
  - 用户列表表格
  - 用户详情模态框
  - 用户状态管理
  - 用户创建/编辑表单

### 5. 用户个人资料页面 (/profile)

- **功能**: 用户个人资料管理
- **访问权限**: 已登录用户
- **使用API**: 
  - GET `/auth/me` - 获取当前用户信息
  - PUT `/users/{id}` - 更新用户信息
- **组件**:
  - 个人资料表单
  - 密码修改表单
  - 活动历史
  - 账户设置

## 公共组件设计

### 1. 布局组件

#### 1.1 侧边栏导航 (SidebarNav)
- 用于仪表盘内部导航
- 根据用户权限显示不同菜单项
- 支持折叠/展开

#### 1.2 顶部导航 (TopNav)
- 显示用户信息和主要操作
- 包含通知、用户头像、登出等
- 响应式设计

### 2. 表单组件

#### 2.1 表单输入 (FormInput)
- 统一的输入框样式
- 支持验证状态显示
- 包含标签、提示信息

#### 2.2 表单选择器 (FormSelect)
- 下拉选择器
- 支持搜索、多选等模式

### 3. 数据展示组件

#### 3.1 数据表格 (DataTable)
- 可排序、可筛选的表格
- 支持分页
- 行选择和批量操作

#### 3.2 状态指示器 (StatusIndicator)
- 统一的状态显示样式
- 支持多种状态类型

### 4. 图表组件

#### 4.1 折线图 (LineChart)
- 时间序列数据展示
- 支持多条线、交互式提示

#### 4.2 饼图 (PieChart)
- 占比数据展示
- 支持交互式图例

## 权限控制

基于角色的访问控制 (RBAC):

1. **匿名用户**: 只能访问首页、登录、注册页面
2. **普通用户**: 可以访问仪表盘和自己的个人资料
3. **管理员**: 可以访问所有页面，包括系统管理功能

## 响应式设计

- **桌面**: ≥1024px - 完整布局
- **平板**: 768px-1023px - 简化布局
- **手机**: <768px - 移动优化布局

## 性能优化

1. **代码分割**: 按路由分割代码
2. **懒加载**: 非关键资源懒加载
3. **缓存策略**: 合理使用浏览器缓存
4. **图片优化**: 使用现代图片格式和尺寸适配

## 可访问性

1. **语义化HTML**: 正确使用HTML标签
2. **键盘导航**: 支持全键盘操作
3. **屏幕阅读器**: 提供ARIA标签
4. **颜色对比度**: 确保足够的对比度

## 国际化

1. **多语言支持**: 使用React i18next
2. **本地化**: 日期、数字、货币格式本地化
3. **RTL支持**: 支持从右到左的语言

## 测试策略

1. **单元测试**: Jest + React Testing Library
2. **集成测试**: 端到端测试关键流程
3. **可访问性测试**: axe-core自动化测试
4. **性能测试**: Lighthouse性能审计

## 部署考虑

1. **环境配置**: 多环境配置管理
2. **静态资源**: CDN分发
3. **监控**: 错误追踪和性能监控
4. **安全**: CSP、XSS防护、敏感信息保护