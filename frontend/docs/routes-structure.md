# AI Higress 前端路由结构

## 路由树形结构

```
/ (根路径)
├── / (首页) - [公开访问]
│
├── /login - [公开访问]
│   └── 访问受限时自动跳转至此
│
├── /register - [公开访问]
│
├── /dashboard (仪表盘模块) - [需要登录]
│   ├── /overview (概览)
│   ├── /providers (提供商管理)
│   │   ├── /{id} (提供商详情)
│   │   ├── /{id}/models (提供商模型)
│   │   └── /{id}/health (提供商健康检查)
│   ├── /logical-models (逻辑模型管理)
│   │   ├── /{id} (逻辑模型详情)
│   │   └── /{id}/upstreams (上游提供商)
│   ├── /api-keys (API密钥管理)
│   │   ├── /{id} (API密钥详情)
│   │   └── /create (创建API密钥)
│   ├── /routing (路由管理)
│   │   ├── /decision (路由决策)
│   │   └── /sessions/{id} (会话管理)
│   └── /metrics (指标监控)
│
├── /system (系统管理) - [管理员权限]
│   ├── /admin (系统管理)
│   │   ├── /status (系统状态)
│   │   ├── /keys (密钥管理)
│   │   └── /logs (系统日志)
│   └── /users (用户管理)
│       ├── /{id} (用户详情)
│       └── /create (创建用户)
│
└── /profile (个人资料) - [需要登录]
    ├── /settings (账户设置)
    ├── /security (安全设置)
    └── /activity (活动历史)
```

## 访问权限矩阵

| 路由 | 匿名用户 | 普通用户 | 管理员 |
|------|----------|----------|--------|
| / | ✓ | ✓ | ✓ |
| /login | ✓ | ✗ | ✗ |
| /register | ✓ | ✗ | ✗ |
| /dashboard/* | ✗ | ✓ | ✓ |
| /system/* | ✗ | ✗ | ✓ |
| /profile | ✗ | ✓ | ✓ |

## 页面跳转逻辑

### 认证流程
1. 未登录用户访问受保护页面 → 自动重定向到 `/login`
2. 登录成功 → 重定向到 `/dashboard/overview`
3. 登出 → 重定向到 `/`

### 导航结构
1. **主导航栏**（登录后显示）
   - 仪表盘（默认展开子菜单）
   - 系统管理（仅管理员可见）
   - 个人资料

2. **侧边栏**（仪表盘内导航）
   - 概览
   - 提供商管理
   - 逻辑模型管理
   - API密钥管理
   - 路由管理
   - 指标监控

3. **面包屑导航**
   - 显示当前页面路径
   - 支持快速返回上级页面

## API 使用映射

### 认证相关
- `/auth/login` → `/login` 页面
- `/auth/register` → `/register` 页面
- `/auth/refresh` → 全局拦截器使用
- `/auth/me` → `/profile` 页面

### 仪表盘模块
- `/providers` → `/dashboard/providers` 页面
- `/logical-models` → `/dashboard/logical-models` 页面
- `/routing/decide` → `/dashboard/routing` 页面
- `/routing/sessions/{id}` → `/dashboard/routing` 页面

### 系统管理
- `/system/*` → `/system/*` 页面

### 用户管理
- `/users` → `/system/users` 页面（管理员）
- `/users/{id}` → `/profile` 页面（当前用户）或 `/system/users/{id}` 页面（管理员）

## 状态管理

### 全局状态
- 用户认证状态
- 主题设置
- 语言设置
- 系统配置

### 页面状态
- 表单数据
- 列表数据
- 分页信息
- 筛选条件

### 缓存策略
- 用户信息 → SessionStorage（会话级别）
- 系统配置 → LocalStorage（持久化）
- API数据 → 内存缓存（短时间）

## 错误处理

### 401 未认证
- 清除本地认证信息
- 重定向到 `/login`
- 显示认证失败提示

### 403 无权限
- 显示权限不足提示
- 重定向到 `/dashboard/overview`

### 404 页面不存在
- 显示自定义404页面
- 提供返回首页的链接

### 500 服务器错误
- 显示错误提示
- 提供重试选项
- 记录错误日志

## 性能优化

### 预加载
- 首页加载后预加载用户信息
- 仪表盘加载后预加载概览数据

### 懒加载
- 非关键图片懒加载
- 组件懒加载

### 路由缓存
- 使用Next.js的缓存功能
- 合理设置缓存策略

## 交互设计

### 加载状态
- 页面级别加载指示器
- 组件级别加载状态
- 按钮点击状态

### 反馈机制
- 成功操作提示
- 错误信息展示
- 进度指示器

### 确认操作
- 删除操作二次确认
- 重要操作确认对话框
- 批量操作确认