# 快速验证指南

## 问题修复总结

✅ **问题 1**：日期显示 "20440 天前" → 已修复，现在显示"未知"或正确的相对时间
✅ **问题 2**：国际化文案显示 key 值 → 已修复，添加了缺失的翻译

## 快速验证步骤

### 1. 清除缓存并重启（必须！）

```bash
# 1. 停止开发服务器（Ctrl+C）

# 2. 清除 Next.js 缓存
cd frontend
rm -rf .next

# 3. 重新启动
bun run dev
```

### 2. 清除浏览器缓存

在浏览器中：
1. 打开开发者工具（F12）
2. 右键点击刷新按钮
3. 选择"清空缓存并硬性重新加载"

或者使用快捷键：
- Chrome/Edge: `Ctrl+Shift+Delete`（Windows）或 `Cmd+Shift+Delete`（Mac）
- 选择"缓存的图片和文件"
- 点击"清除数据"

### 3. 访问系统页

```
http://localhost:3000/dashboard/system
```

### 4. 检查修复效果

#### 检查点 1：日期显示

查看每个 Provider 卡片的"最后检查"时间：

✅ **正常情况**：
- 显示 "刚刚"
- 显示 "X 分钟前"
- 显示 "X 小时前"
- 显示 "X 天前"（X < 30）
- 显示具体日期（如 "2025/10/1"）

✅ **异常数据处理**：
- 显示 "未知"（而不是 "20440 天前"）

#### 检查点 2：国际化文案

查看每个 Provider 卡片的标签：

✅ **中文环境**：
- 运行状态：显示"运行状态"（不是 `dashboardV2.provider.operationStatus`）
- 健康状态：显示"健康状态"（不是 `dashboardV2.provider.healthStatus`）
- 审核状态：显示"审核状态"（不是 `dashboardV2.provider.auditStatus`）
- 最后检查：显示"最后检查"（不是 `dashboardV2.provider.lastCheck.label`）

✅ **状态值翻译**：
- 运行中/未运行/维护中
- 健康/降级/不健康
- 已批准/待审核/已拒绝

#### 检查点 3：切换语言

1. 点击右上角的语言切换按钮
2. 切换到英文
3. 检查所有文案是否变为英文：
   - Operation Status
   - Health Status
   - Audit Status
   - Last Check

### 5. 检查控制台

打开浏览器开发者工具（F12），检查 Console 标签：

✅ **无错误**：
- 没有红色错误信息
- 没有国际化相关的警告
- 没有日期格式化相关的错误

## 如果问题仍然存在

### 问题 A：仍然显示 "20440 天前"

**可能原因**：
- 浏览器缓存未清除
- 开发服务器未重启
- 代码未正确保存

**解决方案**：
1. 确认文件已保存
2. 完全关闭浏览器，重新打开
3. 删除 `.next` 目录
4. 重启开发服务器

### 问题 B：仍然显示国际化 key

**可能原因**：
- 国际化文件未正确加载
- 浏览器缓存问题
- 热重载失败

**解决方案**：
1. 检查 `frontend/lib/i18n/dashboard.ts` 文件是否包含新的翻译
2. 检查 `frontend/lib/i18n/index.ts` 是否导出了 `dashboardV2Translations`
3. 完全重启开发服务器
4. 清除浏览器缓存

### 问题 C：页面无法访问

**可能原因**：
- 权限问题（非管理员）
- 路由配置问题

**解决方案**：
1. 确认使用管理员账号登录
2. 检查用户的 `is_superuser` 字段是否为 `true`
3. 查看浏览器控制台的错误信息

## 预期的最终效果

### Provider 状态卡片示例

```
┌─────────────────────────────────┐
│ a4f-66849c86                    │
├─────────────────────────────────┤
│ 运行状态          运行中 [绿色]  │
│ 健康状态          健康   [绿色]  │
│ 审核状态          待审核 [蓝色]  │
│ ─────────────────────────────── │
│ 最后检查: 2 天前                 │
└─────────────────────────────────┘
```

或者对于无效数据：

```
┌─────────────────────────────────┐
│ b4u-66849c86                    │
├─────────────────────────────────┤
│ 运行状态          运行中 [绿色]  │
│ 健康状态          健康   [绿色]  │
│ 审核状态          待审核 [蓝色]  │
│ ─────────────────────────────── │
│ 最后检查: 未知                   │
└─────────────────────────────────┘
```

## 验证完成清单

- [ ] 已清除 `.next` 目录
- [ ] 已重启开发服务器
- [ ] 已清除浏览器缓存
- [ ] 已访问系统页
- [ ] 日期显示正常（无 "20440 天前"）
- [ ] 国际化文案正常（无 key 值）
- [ ] 中文翻译正确
- [ ] 英文翻译正确
- [ ] 语言切换正常
- [ ] 控制台无错误

## 需要帮助？

如果按照以上步骤仍然无法解决问题，请提供以下信息：

1. 浏览器控制台的完整错误信息（截图）
2. 网络请求的响应数据（开发者工具 → Network 标签）
3. 当前使用的浏览器和版本
4. 是否使用了管理员账号登录

## 相关文档

- [BUG_FIXES.md](./BUG_FIXES.md) - 详细的 bug 修复报告
- [MANUAL_TEST_GUIDE.md](./MANUAL_TEST_GUIDE.md) - 完整的手动测试指南
- [TASK_14_COMPLETION.md](./TASK_14_COMPLETION.md) - 任务完成报告
