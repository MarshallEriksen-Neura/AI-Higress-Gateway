# ä¼šè¯ç®¡ç†é¡µé¢è®¾è®¡æ–¹æ¡ˆ

## 1. æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†æè¿°ä¼šè¯ç®¡ç†åŠŸèƒ½çš„å‰ç«¯è®¾è®¡æ–¹æ¡ˆã€‚æ ¹æ®éœ€æ±‚åˆ†æå’Œç°æœ‰ä»£ç ç»“æ„ï¼Œæˆ‘ä»¬å°†é‡‡ç”¨**é›†æˆæ–¹æ¡ˆ**ï¼Œåœ¨ç°æœ‰çš„ Profile é¡µé¢ï¼ˆ`/profile`ï¼‰ä¸­æ·»åŠ ä¼šè¯ç®¡ç†åŠŸèƒ½ã€‚

### 1.1 è®¾è®¡ç›®æ ‡

- è®©ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ´»è·ƒçš„ç™»å½•ä¼šè¯
- æä¾›è¿œç¨‹ç™»å‡ºåŠŸèƒ½ï¼Œå¢å¼ºè´¦æˆ·å®‰å…¨æ€§
- éµå¾ªé¡¹ç›®çš„æç®€å¢¨æ°´é£æ ¼è®¾è®¡è§„èŒƒ
- ä¿æŒä¸ç°æœ‰ Profile é¡µé¢çš„ä¸€è‡´æ€§

### 1.2 ä¼˜å…ˆçº§

â­â­ ä¸­ä¼˜å…ˆçº§

## 2. é¡µé¢ç»“æ„è®¾è®¡

### 2.1 é¡µé¢è·¯å¾„

**è·¯å¾„**: `/profile`ï¼ˆç°æœ‰é¡µé¢ï¼Œæ·»åŠ æ–°å¡ç‰‡ï¼‰

### 2.2 å¸ƒå±€æ–¹æ¡ˆ

åœ¨ç°æœ‰ Profile é¡µé¢çš„"Security"å¡ç‰‡ä¹‹åï¼Œæ·»åŠ æ–°çš„"Active Sessions"å¡ç‰‡ã€‚æ•´ä½“å¸ƒå±€é¡ºåºï¼š

```
/profile
â”œâ”€â”€ Profile Information (ç°æœ‰)
â”œâ”€â”€ Security (ç°æœ‰)
â”œâ”€â”€ Active Sessions (æ–°å¢) â­
â”œâ”€â”€ Preferences (ç°æœ‰)
â””â”€â”€ Danger Zone (ç°æœ‰)
```

### 2.3 é¡µé¢ç»“æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ My Profile                                              â”‚
â”‚ Manage your account settings and preferences           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ [Profile Information Card]                             â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ [Security Card]                                        â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚ [Active Sessions Card] â­ NEW                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ–¥ï¸ Current Device (This device)                 â”‚   â”‚
â”‚ â”‚ Chrome on Windows â€¢ 192.168.1.100               â”‚   â”‚
â”‚ â”‚ Last active: Just now                           â”‚   â”‚
â”‚ â”‚ Logged in: 2 hours ago                          â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ ğŸ“± Mobile Device                        [Revoke]â”‚   â”‚
â”‚ â”‚ Safari on iOS â€¢ 192.168.1.101                   â”‚   â”‚
â”‚ â”‚ Last active: 5 minutes ago                      â”‚   â”‚
â”‚ â”‚ Logged in: 1 day ago                            â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                         â”‚
â”‚ [Revoke All Other Sessions]                            â”‚
â”‚                                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Preferences Card]                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 3. åŠŸèƒ½è®¾è®¡

### 3.1 æ ¸å¿ƒåŠŸèƒ½

#### 3.1.1 æŸ¥çœ‹æ´»è·ƒä¼šè¯åˆ—è¡¨

**åŠŸèƒ½æè¿°**ï¼š
- æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒä¼šè¯
- æ¯ä¸ªä¼šè¯æ˜¾ç¤ºè®¾å¤‡ä¿¡æ¯ã€IPåœ°å€ã€ç™»å½•æ—¶é—´ã€æœ€åæ´»è·ƒæ—¶é—´
- æ ‡è¯†å½“å‰ä¼šè¯ï¼ˆç”¨æˆ·æ­£åœ¨ä½¿ç”¨çš„è®¾å¤‡ï¼‰

**æ•°æ®æ¥æº**ï¼š
- API: `GET /v1/sessions`
- è¿”å›ç±»å‹: `SessionResponse[]`

**æ˜¾ç¤ºä¿¡æ¯**ï¼š
```typescript
interface SessionDisplay {
  session_id: string;           // ä¼šè¯ID
  device_info: {
    user_agent: string;         // è§£æåçš„è®¾å¤‡ä¿¡æ¯
    ip_address: string;         // IPåœ°å€
  };
  created_at: string;           // ç™»å½•æ—¶é—´
  last_used_at: string;         // æœ€åæ´»è·ƒæ—¶é—´
  is_current: boolean;          // æ˜¯å¦ä¸ºå½“å‰ä¼šè¯
}
```

#### 3.1.2 æ’¤é”€æŒ‡å®šä¼šè¯

**åŠŸèƒ½æè¿°**ï¼š
- ç”¨æˆ·å¯ä»¥æ’¤é”€ä»»ä½•éå½“å‰ä¼šè¯
- æ’¤é”€åï¼Œè¯¥è®¾å¤‡å°†è¢«å¼ºåˆ¶ç™»å‡º
- éœ€è¦äºŒæ¬¡ç¡®è®¤

**äº¤äº’æµç¨‹**ï¼š
```mermaid
graph TD
    A[ç‚¹å‡»æ’¤é”€æŒ‰é’®] --> B[æ˜¾ç¤ºç¡®è®¤å¯¹è¯æ¡†]
    B --> C{ç”¨æˆ·ç¡®è®¤?}
    C -->|æ˜¯| D[è°ƒç”¨ DELETE API]
    C -->|å¦| E[å…³é—­å¯¹è¯æ¡†]
    D --> F{API æˆåŠŸ?}
    F -->|æ˜¯| G[æ˜¾ç¤ºæˆåŠŸæç¤º]
    F -->|å¦| H[æ˜¾ç¤ºé”™è¯¯æç¤º]
    G --> I[åˆ·æ–°ä¼šè¯åˆ—è¡¨]
    H --> I
```

**APIè°ƒç”¨**ï¼š
- ç«¯ç‚¹: `DELETE /v1/sessions/{session_id}`
- å‚æ•°: `session_id` (è·¯å¾„å‚æ•°)

#### 3.1.3 æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯

**åŠŸèƒ½æè¿°**ï¼š
- ä¸€é”®æ’¤é”€é™¤å½“å‰ä¼šè¯å¤–çš„æ‰€æœ‰ä¼šè¯
- é€‚ç”¨äºè´¦æˆ·å®‰å…¨å—å¨èƒçš„åœºæ™¯
- éœ€è¦äºŒæ¬¡ç¡®è®¤

**APIè°ƒç”¨**ï¼š
- ç«¯ç‚¹: `DELETE /v1/sessions/others`
- æ— éœ€å‚æ•°

### 3.2 è®¾å¤‡ä¿¡æ¯è§£æ

**User-Agent è§£æè§„åˆ™**ï¼š

```typescript
// è§£æ User-Agent å­—ç¬¦ä¸²ï¼Œæå–è®¾å¤‡å’Œæµè§ˆå™¨ä¿¡æ¯
function parseUserAgent(userAgent: string): {
  browser: string;
  os: string;
  deviceType: 'desktop' | 'mobile' | 'tablet' | 'unknown';
} {
  // ç¤ºä¾‹å®ç°
  // Chrome on Windows -> { browser: 'Chrome', os: 'Windows', deviceType: 'desktop' }
  // Safari on iOS -> { browser: 'Safari', os: 'iOS', deviceType: 'mobile' }
}
```

**æ˜¾ç¤ºæ ¼å¼**ï¼š
- æ¡Œé¢è®¾å¤‡: `Chrome on Windows`
- ç§»åŠ¨è®¾å¤‡: `Safari on iOS`
- æœªçŸ¥è®¾å¤‡: `Unknown Device`

### 3.3 æ—¶é—´æ˜¾ç¤º

**ç›¸å¯¹æ—¶é—´æ ¼å¼**ï¼š
- åˆšåˆš: `Just now` (< 1åˆ†é’Ÿ)
- åˆ†é’Ÿå‰: `5 minutes ago` (< 1å°æ—¶)
- å°æ—¶å‰: `2 hours ago` (< 24å°æ—¶)
- å¤©å‰: `3 days ago` (< 7å¤©)
- å…·ä½“æ—¥æœŸ: `2024-12-01 14:30` (>= 7å¤©)

## 4. UI/UX è®¾è®¡

### 4.1 è®¾è®¡åŸåˆ™

éµå¾ª `ui-prompt.md` ä¸­çš„æç®€å¢¨æ°´é£æ ¼ï¼š

1. **æç®€ä¸»ä¹‰**ï¼šæœ€å°‘å…ƒç´ ï¼Œæœ€å¤§åŠŸèƒ½
2. **ç•™ç™½å……è¶³**ï¼šå¡ç‰‡é—´è· 24pxï¼Œå†…éƒ¨é—´è· 20px
3. **è‰²å½©å…‹åˆ¶**ï¼šä¸»è¦ä½¿ç”¨é»‘ç™½ç°ï¼ŒçŠ¶æ€è‰²ç‚¹ç¼€
4. **æ¸…æ™°å±‚çº§**ï¼šé€šè¿‡é—´è·å’Œå­—é‡åŒºåˆ†ä¿¡æ¯å±‚çº§

### 4.2 ä¼šè¯å¡ç‰‡è®¾è®¡

#### 4.2.1 å½“å‰ä¼šè¯å¡ç‰‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ–¥ï¸ Current Device                                       â”‚
â”‚ Chrome on Windows                                       â”‚
â”‚ 192.168.1.100                                          â”‚
â”‚                                                         â”‚
â”‚ Last active: Just now                                  â”‚
â”‚ Logged in: 2 hours ago                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ·å¼ç‰¹å¾**ï¼š
- æµ…è‰²èƒŒæ™¯ (`bg-muted/30`)
- ç»¿è‰²è¾¹æ¡† (`border-green-500/20`)
- "Current Device" æ ‡ç­¾å¸¦ç»¿è‰²åœ†ç‚¹
- æ— æ’¤é”€æŒ‰é’®

#### 4.2.2 å…¶ä»–ä¼šè¯å¡ç‰‡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± Mobile Device                            [Revoke]    â”‚
â”‚ Safari on iOS                                          â”‚
â”‚ 192.168.1.101                                          â”‚
â”‚                                                         â”‚
â”‚ Last active: 5 minutes ago                             â”‚
â”‚ Logged in: 1 day ago                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ ·å¼ç‰¹å¾**ï¼š
- ç™½è‰²èƒŒæ™¯ (`bg-card`)
- ç°è‰²è¾¹æ¡† (`border`)
- å³ä¸Šè§’æ’¤é”€æŒ‰é’® (`variant="ghost"`)
- æ‚¬åœæ—¶æ˜¾ç¤ºé˜´å½±

### 4.3 å›¾æ ‡ä½¿ç”¨

ä½¿ç”¨ `lucide-react` å›¾æ ‡åº“ï¼š

- æ¡Œé¢è®¾å¤‡: `Monitor` æˆ– `Laptop`
- ç§»åŠ¨è®¾å¤‡: `Smartphone`
- å¹³æ¿è®¾å¤‡: `Tablet`
- æœªçŸ¥è®¾å¤‡: `HelpCircle`
- å½“å‰ä¼šè¯æ ‡è¯†: `CheckCircle2` (ç»¿è‰²)
- æ’¤é”€æ“ä½œ: `X` æˆ– `LogOut`

### 4.4 ç¡®è®¤å¯¹è¯æ¡†è®¾è®¡

#### 4.4.1 æ’¤é”€å•ä¸ªä¼šè¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Revoke Session?                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ Are you sure you want to revoke this   â”‚
â”‚ session? The device will be logged out â”‚
â”‚ immediately.                            â”‚
â”‚                                         â”‚
â”‚ Device: Chrome on Windows               â”‚
â”‚ IP: 192.168.1.100                      â”‚
â”‚                                         â”‚
â”‚         [Cancel]  [Revoke Session]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.4.2 æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Revoke All Other Sessions?              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ This will log out all devices except   â”‚
â”‚ this one. You'll need to log in again  â”‚
â”‚ on those devices.                       â”‚
â”‚                                         â”‚
â”‚ Sessions to revoke: 3                   â”‚
â”‚                                         â”‚
â”‚    [Cancel]  [Revoke All Sessions]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¯¹è¯æ¡†ç»„ä»¶**ï¼šä½¿ç”¨ `@/components/ui/alert-dialog`

## 5. æŠ€æœ¯å®ç°æ–¹æ¡ˆ

### 5.1 æ–‡ä»¶ç»“æ„

```
frontend/
â”œâ”€â”€ app/
â”‚   â””â”€â”€ profile/
â”‚       â”œâ”€â”€ page.tsx (ä¿®æ”¹ï¼šæ·»åŠ ä¼šè¯ç®¡ç†å¡ç‰‡)
â”‚       â””â”€â”€ components/
â”‚           â”œâ”€â”€ session-card.tsx (æ–°å¢ï¼šä¼šè¯å¡ç‰‡ç»„ä»¶)
â”‚           â””â”€â”€ revoke-session-dialog.tsx (æ–°å¢ï¼šæ’¤é”€ç¡®è®¤å¯¹è¯æ¡†)
â”œâ”€â”€ http/
â”‚   â””â”€â”€ session.ts (æ–°å¢ï¼šä¼šè¯ç®¡ç† API å®¢æˆ·ç«¯)
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api-types.ts (ä¿®æ”¹ï¼šæ·»åŠ ä¼šè¯ç›¸å…³ç±»å‹)
â”‚   â”œâ”€â”€ swr/
â”‚   â”‚   â””â”€â”€ use-sessions.ts (æ–°å¢ï¼šä¼šè¯ç®¡ç† SWR Hook)
â”‚   â”œâ”€â”€ i18n/
â”‚   â”‚   â””â”€â”€ sessions.ts (æ–°å¢ï¼šä¼šè¯ç®¡ç†å›½é™…åŒ–æ–‡æ¡ˆ)
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ user-agent-parser.ts (æ–°å¢ï¼šUser-Agent è§£æå·¥å…·)
â”‚       â””â”€â”€ time-formatter.ts (æ–°å¢ï¼šæ—¶é—´æ ¼å¼åŒ–å·¥å…·)
```

### 5.2 ç±»å‹å®šä¹‰

**æ–‡ä»¶**: `frontend/lib/api-types.ts`

```typescript
// ============= ä¼šè¯ç®¡ç†ç›¸å…³ =============

export interface DeviceInfo {
  user_agent: string | null;
  ip_address: string | null;
}

export interface SessionResponse {
  session_id: string;
  created_at: string;
  last_used_at: string;
  device_info: DeviceInfo | null;
  is_current: boolean;
}

export interface ParsedDeviceInfo {
  browser: string;
  os: string;
  deviceType: 'desktop' | 'mobile' | 'tablet' | 'unknown';
  icon: 'Monitor' | 'Smartphone' | 'Tablet' | 'HelpCircle';
}
```

### 5.3 API å®¢æˆ·ç«¯

**æ–‡ä»¶**: `frontend/http/session.ts`

```typescript
import { httpClient } from './client';
import type { SessionResponse } from '@/lib/api-types';

export const sessionService = {
  // è·å–ä¼šè¯åˆ—è¡¨
  getSessions: async (): Promise<SessionResponse[]> => {
    const response = await httpClient.get('/v1/sessions');
    return response.data;
  },

  // æ’¤é”€æŒ‡å®šä¼šè¯
  revokeSession: async (sessionId: string): Promise<{ message: string }> => {
    const response = await httpClient.delete(`/v1/sessions/${sessionId}`);
    return response.data;
  },

  // æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯
  revokeOtherSessions: async (): Promise<{ message: string }> => {
    const response = await httpClient.delete('/v1/sessions/others');
    return response.data;
  },
};
```

### 5.4 SWR Hook

**æ–‡ä»¶**: `frontend/lib/swr/use-sessions.ts`

```typescript
"use client";

import { useCallback } from 'react';
import { useApiGet, useApiDelete } from './hooks';
import { sessionService } from '@/http/session';
import type { SessionResponse } from '@/lib/api-types';

/**
 * è·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æ´»è·ƒä¼šè¯
 */
export const useSessions = () => {
  const {
    data,
    error,
    loading,
    refresh
  } = useApiGet<SessionResponse[]>(
    '/v1/sessions',
    { strategy: 'frequent' }
  );

  return {
    sessions: data || [],
    loading,
    error,
    refresh
  };
};

/**
 * æ’¤é”€ä¼šè¯æ“ä½œ
 */
export const useRevokeSession = () => {
  const revokeMutation = useApiDelete<{ message: string }>('');

  const revokeSession = useCallback(async (sessionId: string) => {
    return await sessionService.revokeSession(sessionId);
  }, []);

  const revokeOtherSessions = useCallback(async () => {
    return await sessionService.revokeOtherSessions();
  }, []);

  return {
    revokeSession,
    revokeOtherSessions,
    submitting: revokeMutation.submitting,
  };
};
```

### 5.5 å·¥å…·å‡½æ•°

#### 5.5.1 User-Agent è§£æ

**æ–‡ä»¶**: `frontend/lib/utils/user-agent-parser.ts`

```typescript
import type { ParsedDeviceInfo } from '@/lib/api-types';

export function parseUserAgent(userAgent: string | null): ParsedDeviceInfo {
  if (!userAgent) {
    return {
      browser: 'Unknown',
      os: 'Unknown',
      deviceType: 'unknown',
      icon: 'HelpCircle',
    };
  }

  const ua = userAgent.toLowerCase();
  
  // æ£€æµ‹æ“ä½œç³»ç»Ÿ
  let os = 'Unknown';
  if (ua.includes('windows')) os = 'Windows';
  else if (ua.includes('mac os')) os = 'macOS';
  else if (ua.includes('linux')) os = 'Linux';
  else if (ua.includes('android')) os = 'Android';
  else if (ua.includes('ios') || ua.includes('iphone') || ua.includes('ipad')) os = 'iOS';

  // æ£€æµ‹æµè§ˆå™¨
  let browser = 'Unknown';
  if (ua.includes('chrome') && !ua.includes('edg')) browser = 'Chrome';
  else if (ua.includes('safari') && !ua.includes('chrome')) browser = 'Safari';
  else if (ua.includes('firefox')) browser = 'Firefox';
  else if (ua.includes('edg')) browser = 'Edge';

  // æ£€æµ‹è®¾å¤‡ç±»å‹
  let deviceType: ParsedDeviceInfo['deviceType'] = 'unknown';
  let icon: ParsedDeviceInfo['icon'] = 'HelpCircle';
  
  if (ua.includes('mobile') || ua.includes('android') || ua.includes('iphone')) {
    deviceType = 'mobile';
    icon = 'Smartphone';
  } else if (ua.includes('tablet') || ua.includes('ipad')) {
    deviceType = 'tablet';
    icon = 'Tablet';
  } else if (os !== 'Unknown') {
    deviceType = 'desktop';
    icon = 'Monitor';
  }

  return { browser, os, deviceType, icon };
}

export function formatDeviceInfo(parsed: ParsedDeviceInfo): string {
  if (parsed.browser === 'Unknown' && parsed.os === 'Unknown') {
    return 'Unknown Device';
  }
  return `${parsed.browser} on ${parsed.os}`;
}
```

#### 5.5.2 æ—¶é—´æ ¼å¼åŒ–

**æ–‡ä»¶**: `frontend/lib/utils/time-formatter.ts`

```typescript
export function formatRelativeTime(dateString: string, locale: 'en' | 'zh' = 'en'): string {
  const date = new Date(dateString);
  const now = new Date();
  const diffMs = now.getTime() - date.getTime();
  const diffMinutes = Math.floor(diffMs / 60000);
  const diffHours = Math.floor(diffMs / 3600000);
  const diffDays = Math.floor(diffMs / 86400000);

  if (locale === 'zh') {
    if (diffMinutes < 1) return 'åˆšåˆš';
    if (diffMinutes < 60) return `${diffMinutes} åˆ†é’Ÿå‰`;
    if (diffHours < 24) return `${diffHours} å°æ—¶å‰`;
    if (diffDays < 7) return `${diffDays} å¤©å‰`;
    return date.toLocaleString('zh-CN', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
      hour: '2-digit',
      minute: '2-digit',
    });
  }

  // English
  if (diffMinutes < 1) return 'Just now';
  if (diffMinutes < 60) return `${diffMinutes} minute${diffMinutes > 1 ? 's' : ''} ago`;
  if (diffHours < 24) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;
  if (diffDays < 7) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;
  return date.toLocaleString('en-US', {
    year: 'numeric',
    month: '2-digit',
    day: '2-digit',
    hour: '2-digit',
    minute: '2-digit',
  });
}
```

### 5.6 ç»„ä»¶å®ç°

#### 5.6.1 ä¼šè¯å¡ç‰‡ç»„ä»¶

**æ–‡ä»¶**: `frontend/app/profile/components/session-card.tsx`

```typescript
"use client";

import React from 'react';
import { Card, CardContent } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Monitor, Smartphone, Tablet, HelpCircle, CheckCircle2 } from 'lucide-react';
import { cn } from '@/lib/utils';
import { parseUserAgent, formatDeviceInfo } from '@/lib/utils/user-agent-parser';
import { formatRelativeTime } from '@/lib/utils/time-formatter';
import { useI18n } from '@/lib/i18n-context';
import type { SessionResponse } from '@/lib/api-types';

interface SessionCardProps {
  session: SessionResponse;
  onRevoke: (sessionId: string) => void;
}

const iconMap = {
  Monitor,
  Smartphone,
  Tablet,
  HelpCircle,
};

export function SessionCard({ session, onRevoke }: SessionCardProps) {
  const { t, language } = useI18n();
  const parsed = parseUserAgent(session.device_info?.user_agent || null);
  const DeviceIcon = iconMap[parsed.icon];

  return (
    <Card
      className={cn(
        'relative',
        session.is_current && 'bg-muted/30 border-green-500/20'
      )}
    >
      <CardContent className="p-4">
        <div className="flex items-start justify-between">
          <div className="flex items-start space-x-3 flex-1">
            <DeviceIcon className="w-5 h-5 text-muted-foreground mt-0.5" />
            <div className="flex-1 min-w-0">
              <div className="flex items-center space-x-2 mb-1">
                <h4 className="text-sm font-medium">
                  {session.is_current ? (
                    <span className="flex items-center space-x-1.5">
                      <CheckCircle2 className="w-4 h-4 text-green-600" />
                      <span>{t('sessions.current_device')}</span>
                    </span>
                  ) : (
                    formatDeviceInfo(parsed)
                  )}
                </h4>
              </div>
              <p className="text-xs text-muted-foreground mb-2">
                {session.device_info?.ip_address || t('sessions.unknown_ip')}
              </p>
              <div className="space-y-0.5 text-xs text-muted-foreground">
                <p>
                  {t('sessions.last_active')}: {formatRelativeTime(session.last_used_at, language)}
                </p>
                <p>
                  {t('sessions.logged_in')}: {formatRelativeTime(session.created_at, language)}
                </p>
              </div>
            </div>
          </div>
          {!session.is_current && (
            <Button
              variant="ghost"
              size="sm"
              onClick={() => onRevoke(session.session_id)}
              className="text-destructive hover:text-destructive hover:bg-destructive/10"
            >
              {t('sessions.revoke')}
            </Button>
          )}
        </div>
      </CardContent>
    </Card>
  );
}
```

#### 5.6.2 æ’¤é”€ç¡®è®¤å¯¹è¯æ¡†

**æ–‡ä»¶**: `frontend/app/profile/components/revoke-session-dialog.tsx`

```typescript
"use client";

import React from 'react';
import {
  AlertDialog,
  AlertDialogAction,
  AlertDialogCancel,
  AlertDialogContent,
  AlertDialogDescription,
  AlertDialogFooter,
  AlertDialogHeader,
  AlertDialogTitle,
} from '@/components/ui/alert-dialog';
import { useI18n } from '@/lib/i18n-context';
import { parseUserAgent, formatDeviceInfo } from '@/lib/utils/user-agent-parser';
import type { SessionResponse } from '@/lib/api-types';

interface RevokeSessionDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  session: SessionResponse | null;
  onConfirm: () => void;
  isRevoking: boolean;
}

export function RevokeSessionDialog({
  open,
  onOpenChange,
  session,
  onConfirm,
  isRevoking,
}: RevokeSessionDialogProps) {
  const { t } = useI18n();

  if (!session) return null;

  const parsed = parseUserAgent(session.device_info?.user_agent || null);
  const deviceInfo = formatDeviceInfo(parsed);

  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>{t('sessions.revoke_dialog_title')}</AlertDialogTitle>
          <AlertDialogDescription className="space-y-2">
            <p>{t('sessions.revoke_dialog_description')}</p>
            <div className="mt-3 p-3 bg-muted rounded-md text-sm">
              <p className="font-medium text-foreground">{deviceInfo}</p>
              <p className="text-muted-foreground">
                {session.device_info?.ip_address || t('sessions.unknown_ip')}
              </p>
            </div>
          </AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel disabled={isRevoking}>
            {t('common.cancel')}
          </AlertDialogCancel>
          <AlertDialogAction
            onClick={onConfirm}
            disabled={isRevoking}
            className="bg-destructive text-destructive-foreground hover:bg-destructive/90"
          >
            {isRevoking ? t('sessions.revoking') : t('sessions.revoke_session')}
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  );
}

interface RevokeAllDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
  sessionCount: number;
  onConfirm: () => void;
  isRevoking: boolean;
}

export function RevokeAllSessionsDialog({
  open,
  onOpenChange,
  sessionCount,
  onConfirm,
  isRevoking,
}: RevokeAllDialogProps) {
  const { t } = useI18n();

  return (
    <AlertDialog open={open} onOpenChange={onOpenChange}>
      <AlertDialogContent>
        <AlertDialogHeader>
          <AlertDialogTitle>{t('sessions.revoke_all_dialog_title')}</AlertDialogTitle>
          <AlertDialogDescription className="space-y-2">
            <p>{t('sessions.revoke_all_dialog_description')}</p>
            <div className="mt-3 p-3 bg-muted rounded-md text-sm">
              <p className="font-medium text-foreground">
                {t('sessions.sessions_to_revoke')}: {sessionCount}
              </p>
            </div>
          </AlertDialogDescription>
        </AlertDialogHeader>
        <AlertDialogFooter>
          <AlertDialogCancel disabled={isRevoking}>
            {t('common.cancel')}
          </AlertDialogCancel>
          <AlertDialogAction
            onClick={onConfirm}
            disabled={isRevoking}
            className="bg-destructive text-destructive-foreground hover:bg-destructive/90"
          >
            {isRevoking ? t('sessions.revoking') : t('sessions.revoke_all_sessions')}
          </AlertDialogAction>
        </AlertDialogFooter>
      </AlertDialogContent>
    </AlertDialog>
  );
}
```

### 5.7 Profile é¡µé¢é›†æˆ

**æ–‡ä»¶**: `frontend/app/profile/page.tsx` (ä¿®æ”¹)

åœ¨ Security å¡ç‰‡ä¹‹åæ·»åŠ  Active Sessions å¡ç‰‡ï¼š

```typescript
// ... ç°æœ‰å¯¼å…¥
import { SessionCard } from './components/session-card';
import { RevokeSessionDialog, RevokeAllSessionsDialog } from './components/revoke-session-dialog';
import { useSessions, useRevokeSession } from '@/lib/swr/use-sessions';
import { useI18n } from '@/lib/i18n-context';
import { useToast } from '@/hooks/use-toast';

export default function ProfilePage() {
  const { t } = useI18n();
  const { toast } = useToast();
  const { sessions, loading, refresh } = useSessions();
  const { revokeSession, revokeOtherSessions, submitting } = useRevokeSession();
  
  const [selectedSession, setSelectedSession] = useState<SessionResponse | null>(null);
  const [showRevokeDialog, setShowRevokeDialog] = useState(false);
  const [showRevokeAllDialog, setShowRevokeAllDialog] = useState(false);

  const otherSessionsCount = sessions.filter(s => !s.is_current).length;

  const handleRevoke = (sessionId: string) => {
    const session = sessions.find(s => s.session_id === sessionId);
    if (session) {
      setSelectedSession(session);
      setShowRevokeDialog(true);
    }
  };

  const handleConfirmRevoke = async () => {
    if (!selectedSession) return;
    
    try {
      await revokeSession(selectedSession.session_id);
      toast({
        title: t('sessions.revoke_success'),
        description: t('sessions.revoke_success_description'),
      });
      setShowRevokeDialog(false);
      refresh();
    } catch (error) {
      toast({
        title: t('sessions.revoke_error'),
        description: t('sessions.revoke_error_description'),
        variant: 'destructive',
      });
    }
  };

  const handleRevokeAll = async () => {
    try {
      await revokeOtherSessions();
      toast({
        title: t('sessions.revoke_all_success'),
        description: t('sessions.revoke_all_success_description'),
      });
      setShowRevokeAllDialog(false);
      refresh();
    } catch (error) {
      toast({
        title: t('sessions.revoke_all_error'),
        description: t('sessions.revoke_all_error_description'),
        variant: 'destructive',
      });
    }
  };

  return (
    <div className="max-w-4xl mx-auto p-6 space-y-6">
      {/* ... ç°æœ‰çš„ Profile Information å’Œ Security å¡ç‰‡ ... */}

      {/* Active Sessions */}
      <Card>
        <CardHeader>
          <CardTitle>{t('sessions.title')}</CardTitle>
          <CardDescription>{t('sessions.description')}</CardDescription>
        </CardHeader>
        <CardContent className="space-y-3">
          {loading ? (
            <div className="text-center py-8 text-muted-foreground">
              {t('common.loading')}
            </div>
          ) : sessions.length === 0 ? (
            <div className="text-center py-8 text-muted-foreground">
              {t('sessions.no_sessions')}
            </div>
          ) : (
            <>
              {sessions.map((session) => (
                <SessionCard
                  key={session.session_id}
                  session={session}
                  onRevoke={handleRevoke}
                />
              ))}
              
              {otherSessionsCount > 0 && (
                <div className="pt-4 border-t">
                  <Button
                    variant="outline"
                    className="w-full text-destructive hover:text-destructive hover:bg-destructive/10"
                    onClick={() => setShowRevokeAllDialog(true)}
                  >
                    {t('sessions.revoke_all_other_sessions')} ({otherSessionsCount})
                  </Button>
                </div>
              )}
            </>
          )}
        </CardContent>
      </Card>

      {/* ... ç°æœ‰çš„ Preferences å’Œ Danger Zone å¡ç‰‡ ... */}

      {/* Dialogs */}
      <RevokeSessionDialog
        open={showRevokeDialog}
        onOpenChange={setShowRevokeDialog}
        session={selectedSession}
        onConfirm={handleConfirmRevoke}
        isRevoking={submitting}
      />
      
      <RevokeAllSessionsDialog
        open={showRevokeAllDialog}
        onOpenChange={setShowRevokeAllDialog}
        sessionCount={otherSessionsCount}
        onConfirm={handleRevokeAll}
        isRevoking={submitting}
      />
    </div>
  );
}
```

## 6. å›½é™…åŒ–æ–‡æ¡ˆ

**æ–‡ä»¶**: `frontend/lib/i18n/sessions.ts`

```typescript
import type { Language } from "../i18n-context";

export const sessionsTranslations: Record<Language, Record<string, string>> = {
  en: {
    // æ ‡é¢˜å’Œæè¿°
    "sessions.title": "Active Sessions",
    "sessions.description": "Manage your active login sessions across devices",
    
    // ä¼šè¯ä¿¡æ¯
    "sessions.current_device": "Current Device",
    "sessions.last_active": "Last active",
    "sessions.logged_in": "Logged in",
    "sessions.unknown_ip": "Unknown IP",
    
    // æ“ä½œæŒ‰é’®
    "sessions.revoke": "Revoke",
    "sessions.revoke_all_other_sessions": "Revoke All Other Sessions",
    
    // æ’¤é”€å•ä¸ªä¼šè¯å¯¹è¯æ¡†
    "sessions.revoke_dialog_title": "Revoke Session?",
    "sessions.revoke_dialog_description": "Are you sure you want to revoke this session? The device will be logged out immediately.",
    "sessions.revoke_session": "Revoke Session",
    "sessions.revoking": "Revoking...",
    
    // æ’¤é”€æ‰€æœ‰ä¼šè¯å¯¹è¯æ¡†
    "sessions.revoke_all_dialog_title": "Revoke All Other Sessions?",
    "sessions.revoke_all_dialog_description": "This will log out all devices except this one. You'll need to log in again on those devices.",
    "sessions.sessions_to_revoke": "Sessions to revoke",
    "sessions.revoke_all_sessions": "Revoke All Sessions",
    
    // çŠ¶æ€æ¶ˆæ¯
    "sessions.no_sessions": "No active sessions",
    "sessions.revoke_success": "Session revoked",
    "sessions.revoke_success_description": "The session has been successfully revoked",
    "sessions.revoke_error": "Failed to revoke session",
    "sessions.revoke_error_description": "An error occurred while revoking the session",
    "sessions.revoke_all_success": "All sessions revoked",
    "sessions.revoke_all_success_description": "All other sessions have been successfully revoked",
    "sessions.revoke_all_error": "Failed to revoke sessions",
    "sessions.revoke_all_error_description": "An error occurred while revoking the sessions",
  },
  zh: {
    // æ ‡é¢˜å’Œæè¿°
    "sessions.title": "æ´»è·ƒä¼šè¯",
    "sessions.description": "ç®¡ç†æ‚¨åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„ç™»å½•ä¼šè¯",
    
    // ä¼šè¯ä¿¡æ¯
    "sessions.current_device": "å½“å‰è®¾å¤‡",
    "sessions.last_active": "æœ€åæ´»è·ƒ",
    "sessions.logged_in": "ç™»å½•æ—¶é—´",
    "sessions.unknown_ip": "æœªçŸ¥ IP",
    
    // æ“ä½œæŒ‰é’®
    "sessions.revoke": "æ’¤é”€",
    "sessions.revoke_all_other_sessions": "æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯",
    
    // æ’¤é”€å•ä¸ªä¼šè¯å¯¹è¯æ¡†
    "sessions.revoke_dialog_title": "æ’¤é”€ä¼šè¯ï¼Ÿ",
    "sessions.revoke_dialog_description": "ç¡®å®šè¦æ’¤é”€æ­¤ä¼šè¯å—ï¼Ÿè¯¥è®¾å¤‡å°†ç«‹å³è¢«ç™»å‡ºã€‚",
    "sessions.revoke_session": "æ’¤é”€ä¼šè¯",
    "sessions.revoking": "æ’¤é”€ä¸­...",
    
    // æ’¤é”€æ‰€æœ‰ä¼šè¯å¯¹è¯æ¡†
    "sessions.revoke_all_dialog_title": "æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯ï¼Ÿ",
    "sessions.revoke_all_dialog_description": "è¿™å°†ç™»å‡ºé™¤å½“å‰è®¾å¤‡å¤–çš„æ‰€æœ‰è®¾å¤‡ã€‚æ‚¨éœ€è¦åœ¨è¿™äº›è®¾å¤‡ä¸Šé‡æ–°ç™»å½•ã€‚",
    "sessions.sessions_to_revoke": "å°†æ’¤é”€çš„ä¼šè¯æ•°",
    "sessions.revoke_all_sessions": "æ’¤é”€æ‰€æœ‰ä¼šè¯",
    
    // çŠ¶æ€æ¶ˆæ¯
    "sessions.no_sessions": "æš‚æ— æ´»è·ƒä¼šè¯",
    "sessions.revoke_success": "ä¼šè¯å·²æ’¤é”€",
    "sessions.revoke_success_description": "ä¼šè¯å·²æˆåŠŸæ’¤é”€",
    "sessions.revoke_error": "æ’¤é”€ä¼šè¯å¤±è´¥",
    "sessions.revoke_error_description": "æ’¤é”€ä¼šè¯æ—¶å‘ç”Ÿé”™è¯¯",
    "sessions.revoke_all_success": "æ‰€æœ‰ä¼šè¯å·²æ’¤é”€",
    "sessions.revoke_all_success_description": "æ‰€æœ‰å…¶ä»–ä¼šè¯å·²æˆåŠŸæ’¤é”€",
    "sessions.revoke_all_error": "æ’¤é”€ä¼šè¯å¤±è´¥",
    "sessions.revoke_all_error_description": "æ’¤é”€ä¼šè¯æ—¶å‘ç”Ÿé”™è¯¯",
  },
};
```

**æ›´æ–°**: `frontend/lib/i18n/index.ts`

```typescript
// æ·»åŠ å¯¼å…¥
import { sessionsTranslations } from "./sessions";

// åœ¨ mergeTranslations ä¸­æ·»åŠ 
export const allTranslations = mergeTranslations(
  // ... ç°æœ‰çš„
  sessionsTranslations  // æ–°å¢
);

// åœ¨å¯¼å‡ºä¸­æ·»åŠ 
export {
  // ... ç°æœ‰çš„
  sessionsTranslations,  // æ–°å¢
};
```

## 7. é”™è¯¯å¤„ç†

### 7.1 API é”™è¯¯å¤„ç†

```typescript
// åœ¨ SWR Hook ä¸­å¤„ç†é”™è¯¯
export const useSessions = () => {
  const { data, error, loading, refresh } = useApiGet<SessionResponse[]>(
    '/v1/sessions',
    { 
      strategy: 'frequent',
      onError: (error) => {
        console.error('Failed to fetch sessions:', error);
        // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…¨å±€é”™è¯¯æç¤º
      }
    }
  );

  return {
    sessions: data || [],
    loading,
    error,
    refresh
  };
};
```

### 7.2 ç½‘ç»œé”™è¯¯å¤„ç†

- ä½¿ç”¨ SWR çš„è‡ªåŠ¨é‡è¯•æœºåˆ¶
- æ˜¾ç¤ºå‹å¥½çš„é”™è¯¯æç¤º
- æä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®

### 7.3 è¾¹ç•Œæƒ…å†µ

1. **æ— ä¼šè¯æ•°æ®**ï¼šæ˜¾ç¤º"æš‚æ— æ´»è·ƒä¼šè¯"æç¤º
2. **åªæœ‰å½“å‰ä¼šè¯**ï¼šéšè—"æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯"æŒ‰é’®
3. **API è°ƒç”¨å¤±è´¥**ï¼šæ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œä¿æŒ UI çŠ¶æ€
4. **æ’¤é”€å½“å‰ä¼šè¯**ï¼šä¸æ˜¾ç¤ºæ’¤é”€æŒ‰é’®ï¼ˆåç«¯ä¹Ÿä¼šæ‹’ç»ï¼‰

## 8. æ€§èƒ½ä¼˜åŒ–

### 8.1 æ•°æ®ç¼“å­˜

- ä½¿ç”¨ SWR çš„ `frequent` ç­–ç•¥ï¼Œå¹³è¡¡å®æ—¶æ€§å’Œæ€§èƒ½
- æ’¤é”€æ“ä½œåæ‰‹åŠ¨åˆ·æ–°æ•°æ®

### 8.2 ç»„ä»¶ä¼˜åŒ–

- ä½¿ç”¨ `React.memo` ä¼˜åŒ–ä¼šè¯å¡ç‰‡ç»„ä»¶
- é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“

### 8.3 æ‡’åŠ è½½

- ä¼šè¯ç®¡ç†åŠŸèƒ½ä»…åœ¨ Profile é¡µé¢åŠ è½½
- å¯¹è¯æ¡†ç»„ä»¶æŒ‰éœ€æ¸²æŸ“

## 9. å®‰å…¨è€ƒè™‘

### 9.1 æƒé™éªŒè¯

- æ‰€æœ‰ API è°ƒç”¨éƒ½éœ€è¦æœ‰æ•ˆçš„ JWT token
- ç”¨æˆ·åªèƒ½æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±çš„ä¼šè¯

### 9.2 æ“ä½œç¡®è®¤

- æ‰€æœ‰æ’¤é”€æ“ä½œéƒ½éœ€è¦äºŒæ¬¡ç¡®è®¤
- æ˜¾ç¤ºå°†è¦æ’¤é”€çš„ä¼šè¯è¯¦æƒ…

### 9.3 æ•æ„Ÿä¿¡æ¯ä¿æŠ¤

- IP åœ°å€å®Œæ•´æ˜¾ç¤ºï¼ˆç”¨äºå®‰å…¨å®¡è®¡ï¼‰
- User-Agent è§£æåæ˜¾ç¤ºï¼ˆæ›´å‹å¥½ï¼‰

## 10. æµ‹è¯•å»ºè®®

### 10.1 å•å…ƒæµ‹è¯•

- User-Agent è§£æå‡½æ•°æµ‹è¯•
- æ—¶é—´æ ¼å¼åŒ–å‡½æ•°æµ‹è¯•
- ç»„ä»¶æ¸²æŸ“æµ‹è¯•

### 10.2 é›†æˆæµ‹è¯•

- API è°ƒç”¨æµ‹è¯•
- SWR Hook æµ‹è¯•
- å®Œæ•´æµç¨‹æµ‹è¯•

### 10.3 E2E æµ‹è¯•

- æŸ¥çœ‹ä¼šè¯åˆ—è¡¨
- æ’¤é”€å•ä¸ªä¼šè¯
- æ’¤é”€æ‰€æœ‰å…¶ä»–ä¼šè¯
- é”™è¯¯å¤„ç†æµç¨‹

## 11. å®æ–½è®¡åˆ’

### 11.1 ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆ1-2å¤©ï¼‰

- [ ] åˆ›å»ºç±»å‹å®šä¹‰
- [ ] å®ç° API å®¢æˆ·ç«¯
- [ ] å®ç° SWR Hook
- [ ] å®ç°å·¥å…·å‡½æ•°ï¼ˆUser-Agent è§£æã€æ—¶é—´æ ¼å¼åŒ–ï¼‰

### 11.2 ç¬¬äºŒé˜¶æ®µï¼šUI ç»„ä»¶ï¼ˆ2-3å¤©ï¼‰

- [ ] å®ç°ä¼šè¯å¡ç‰‡ç»„ä»¶
- [ ] å®ç°æ’¤é”€ç¡®è®¤å¯¹è¯æ¡†
- [ ] é›†æˆåˆ° Profile é¡µé¢
- [ ] æ·»åŠ å›½é™…åŒ–æ–‡æ¡ˆ

### 11.3 ç¬¬ä¸‰é˜¶æ®µï¼šæµ‹è¯•å’Œä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰

- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] è¿›è¡Œé›†æˆæµ‹è¯•
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†å®Œå–„

### 11.4 ç¬¬å››é˜¶æ®µï¼šæ–‡æ¡£å’Œå‘å¸ƒï¼ˆ1å¤©ï¼‰

- [ ] æ›´æ–° API æ–‡æ¡£
- [ ] ç¼–å†™ç”¨æˆ·æŒ‡å—
- [ ] ä»£ç å®¡æŸ¥
- [ ] éƒ¨ç½²ä¸Šçº¿

**æ€»è®¡**: 5-8 ä¸ªå·¥ä½œæ—¥

## 12. åç»­ä¼˜åŒ–æ–¹å‘

### 12.1 åŠŸèƒ½å¢å¼º

1. **ä¼šè¯è¯¦æƒ…**ï¼šç‚¹å‡»ä¼šè¯å¡ç‰‡æŸ¥çœ‹æ›´å¤šè¯¦æƒ…
2. **ä¼šè¯æœç´¢**ï¼šæ”¯æŒæŒ‰è®¾å¤‡ç±»å‹ã€IP åœ°å€æœç´¢
3. **ä¼šè¯é€šçŸ¥**ï¼šæ–°è®¾å¤‡ç™»å½•æ—¶å‘é€é€šçŸ¥
4. **ä¼šè¯å†å²**ï¼šæŸ¥çœ‹å·²æ’¤é”€çš„ä¼šè¯å†å²

### 12.2 å®‰å…¨å¢å¼º

1. **å¼‚å¸¸ç™»å½•æ£€æµ‹**ï¼šæ£€æµ‹å¼‚å¸¸ IP æˆ–è®¾å¤‡
2. **åœ°ç†ä½ç½®æ˜¾ç¤º**ï¼šæ ¹æ® IP æ˜¾ç¤ºå¤§è‡´ä½ç½®
3. **è‡ªåŠ¨æ’¤é”€**ï¼šé•¿æ—¶é—´æœªæ´»è·ƒçš„ä¼šè¯è‡ªåŠ¨æ’¤é”€

### 12.3 ç”¨æˆ·ä½“éªŒ

1. **ä¼šè¯åˆ†ç»„**ï¼šæŒ‰è®¾å¤‡ç±»å‹åˆ†ç»„æ˜¾ç¤º
2. **ä¼šè¯å‘½å**ï¼šå…è®¸ç”¨æˆ·ä¸ºè®¾å¤‡å‘½å
3. **å¿«æ·æ“ä½œ**ï¼šæ‰¹é‡é€‰æ‹©å’Œæ’¤é”€

## 13. ç›¸å…³æ–‡æ¡£

- [åç«¯ä¼šè¯ç®¡ç† API](../../backend/app/api/v1/session_routes.py)
- [JWT Redis å­˜å‚¨è®¾è®¡](../../backend/jwt-redis-storage-plan.md)
- [å‰ç«¯ UI è®¾è®¡è§„èŒƒ](../../../ui-prompt.md)
- [å‰ç«¯æ¶æ„æ–‡æ¡£](../../frontend/docs/frontend-design.md)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2024-12-05  
**æœ€åæ›´æ–°**: 2024-12-05  
**ä½œè€…**: AI Architect  
**çŠ¶æ€**: å¾…å®¡æ ¸